var Br=Object.defineProperty;var kr=(t,e,o)=>e in t?Br(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var W=(t,e,o)=>kr(t,typeof e!="symbol"?e+"":e,o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const x of c.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function o(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(d){if(d.ep)return;d.ep=!0;const c=o(d);fetch(d.href,c)}})();const It=document.getElementById("loadingScreen"),De=document.getElementById("loadingScreenClickText"),br=()=>{It.classList.add("finish")},Er=()=>{It.classList.remove("finish")},Be=t=>{De.textContent=t},Gt=()=>{It.classList.add("hide")},Lo=()=>{It.classList.remove("hide")},ke=()=>{De.classList.remove("hide")},Cr=()=>{De.classList.add("hide")},Lr=()=>{It.remove()},Mr="data:audio/mpeg;base64,SUQzBAAAAAAAflRYWFgAAAASAAADbWFqb3JfYnJhbmQAaXNvbQBUWFhYAAAAEwAAA21pbm9yX3ZlcnNpb24ANTEyAFRYWFgAAAAYAAADY29tcGF0aWJsZV9icmFuZHMAbXA0MQBUU1NFAAAADwAAA0xhdmY1OC43Ni4xMDAAAAAAAAAAAAAAAP/7UMQAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAADAAAADAAACpwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAExhdmM1OC4xMwAAAAAAAAAAAAAAACQGOQAAAAAAAArzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+1LE0QANKUs5rDEE4WsUaHT0DpDRwJTrsceRMNmsNqHR0gNj0wJDeqqy122WSxVutxJoxFENhC1yzNohgRyHiPs/FX4zBZNpUxJU1Mx2koSw+FxFzxkJcNhkkzm5upAOQJsSgn6Evn0mW6agqoSMfB9CXfUm1Bbm6BKGRIkkXxIqo2v7smMAdNi4Tis41temn+tO6alqPsYf703/qqSacNHQOkut01up+1GhprS6mZaLdA0QspkFuX0hLu8S7SyLQ2gQE5Q09GZS7gtB1omsKP/7UsTNABIpjUcsMRRBhDHp8pJwAE1z4f7kR1TLbUqlZK//5W/M///qVv//ym6s/1Y2Yj/X5jHbNVvL6iKB5pRAAnLU0ztVqtsJOKs1w6KkSgiKmEh5DCYodypGdZZogimdiBBBgeGg1noSASsCg2uIhORsiCCazadddAK06LoKgq4kGsjgq4UBXYp4KjXa6gq1B3/ke2I5ZJalep8yCv5V2wkDVTRg4PXEXG5nIm7bIAUYi7LAXVWH4ZpvIaQsAGFOqemHKdiY0gtg6aDCJ+Pz//tSxLGAEi2TYbj2gBlrsa//nlAHNy9hr18uFPteckWGz1r9jYeJbg8aSIgercWd////9X/9fHYsCtO8FoD5ZISjIL2hBzoYdgvwrTVb0a29DG5ee2phlpDitg+QgW5ukTE+azjSluJy+gpC42HEgsFn+KoLBAOnfz2tnKzue867SebVhIeWT/z2LurLJeAckISzlsjBcCkehHRAoLoSyDrBqVikOgjpp7Ez1bmysur82tYRywkBnabNplYcX0ZXOrzq/7C1BCWd5m/yYhH5lp7/+1LEmQAJ6DdT5iRlQTKP6zT0mWJ35fq5H+vRWXnb9smxGwQBA/HmuWMfe1aFarV9zYV6ymrGvT5dwmJ6UBLlernuIEY2W8ACT2kbQZH7LX3q8/EUG2czZMh3QlTpoyf/fbVz/3owIjN/0Z3SEBV0MS7+ICgSFCAQqrCcwToTAWEMmCM1a73SRp+x2cm2xojycqLVyZBtOYyR6vuubcvRBdBlGzamR2abFrf+luxPt+XXdrVZ76mHWvAMHOpG5tlohPy9ZGqtqWWqRqJIJGwKk//7UsSpAApYcT1HoPKBSKjoNMGKjMESIfGRTMu1IZkIq8saSwN7k4YxNodwCf/nE0RC/pnbMoia3/5BAAAdznObzT7Iydf/1Vvt9q22I3nP5Fd5AtM86JwjqdLj6o2ojSQILZIaIQcLA0QCQmF8raNf+JKcFHd5LNG2K796O1zb+ZBSpXp6+GBCzPvVtkd6qyL9/6fanZG6g0d6Gf7H87MzOcgN1MEcmHmLFMqOk3Y5doZG2UCFJGTB2ZiMjFZOPiOqHpMYEK1vk7XtiAQVoynd//tSxLSACgE7NKeEVEFFJ+ewkJaYmFZw/V3sEuPJfsid+ltar9hRGOtVYv6IX///q33r0Vvm+T4MtNRQ773+KKoQ1aMtbXdvFIlEkAV5iUEUQGSMVAQuE3giAgZW9C4YpSSoSge/yt9l0sCK7+6gLnRiTmV8qUOYSLZ81X/PvS3d/rLS3+vn+30+oMhdlGGp7/9SX0XTV/eldQACwYkkysChPCULLAloCt6kRW/YGp2wo1TkTqv6ZNa+W1SjK5RfpxYhLMp+2+sxUfv6K9vW/v//+1LEwYAKYT1HpIyxgUQoKKyTCPCnVm/ZO5T97P3Kr6q/cgDnoe2hNetGp4p3eIcikUCQCPwvJMifKITlWmmcC7OROKxKL6PZc3hKT8glitoTIjELzpPZke/cOAFR/X1frMnv7zOktWk2f9EXOv7Omn+3r+wFWyBjliO6zWqIZZeIZF2sTSDJwT5kJUuiYj1rtRIpOUckyrDnnevo5F2JjbPTLN8yTONOTZUMJlQxzm86m/t77qxU6U7W31E+n/+/3/Xqv9/o3QEDG6fSDuKmEv/7UsTNgApdP0emDFFBPyfpdJMJMCbHWBbMgAcEpYDFEEQmgwQAkNRxPiCCapKpeq4rhdQyQmimedNBKOV7Nn4ybcc+BiRz7Abf7eQV4f1p0yaKczKDn6fXVs7b2et72IzqyK/Eit4yU0YEh4i1HOxfMr7FR/ZfUct1h52lSSNsixkWsga54FhQlQmXlhSUyKUTk3++mOdSAAEGQ5Dsg8JWa6A6+10aNQTQxIVL8uKz7XYTQIn0fbaWugwPo+9veuqnbz/spdN/dvqZC1MJD84r//tSxNoAClE/R4eYrUFHp6m88YoIcEw0WZPD3LIxxOKsxRNNAg73x2l9L4AKylKo60KgRtO0cjkKvjBjGCQskggCCCORhhzbfmpRq90uN/dbMQUPpZEWlHagxRQj1d4puMdmYYWj9X/ofIZ/7a0b9/RvExA7XOGiNmdVMCUjgEijRAOC2m4YuhPQ5VK4mOQk4G8YaDaa5zIu4UPZuIxwd5+BRDBg01TOU0ONG136gNgSvmzG4bwwsOzPLYuh3ap8tdL/mfq/6fRu/6N9h31QKJb/+1LE5YAKSUFL55hOwZKwJzDBlqjD2gUnkPAAA9jpOBrO80SyFkXKsRiuTBBSeF8i3/YoylVyfRLpQYhSYiQI6F2Ic6nYYE92Y6uiPOOvprRrXIEYGD5KH60sz1psRveq823Z0ac6oRlOf6L13AwzPl5AkHpnBWPfgqpwlR1A2OJIAE54SgC2BwKyqLSR5SuJcRwpX9AittxQ/GrdfaWOunJYVmnI4JLMUMUHgk6rELWKlRz+X8SOADpk6W/dFml1n0X9Dvu32Zn+jPpf3/F3o//7UsToAAwNQT2njLFBc6endPMV6RxcHe99Rt1hCUgOBEEAHaK4dw3DmQSASKwo1ncQkT5GpeL5GrV1xCZ2OW1bJaZgAsB7wESka/nT2EiBJGkSk9KtSKxGGrN6+hlWOzqaHffMSl/7aU0qqeh/oJh0nnmBgpyg98hVRITcQNuKAeDoeC5KCwtw7K4kFI0KqcmILkWG1VkQ5mPrdaXu21nuk5OYzJmgOJKhCbYVbo24igs3Vio7FtR2zS6t+lqoMf70ejDPMdPS3i4oryFBr5ZA//tSxOcACwlBN6eMVMGMqSXk8SLx36AQlB15ATCW0QOc4ZDgoX07YEE6konmb5gMDpuV6tFeMaPfL9g85hrF1aiVZrmMMBdBblbS3bK12xKEImriW+9ou9WvH7f8/+u30/181TX8FVtMfcezf+KiGg+rKAUF78lh+uD1EILC/+kjLC6OF4CQBBhdlYaw9NNpx9MDNyTIR4sHA5CAGBiqunpeyhy2iOzPScjljwHF3NZaWobayS1HVTsY+6Oj6uq9zfq1atWl6PQok1VKUv9vFms=";class Qe{constructor(e){W(this,"source");W(this,"isPlaying");this.source=new Audio,this.source.src=e,this.isPlaying=!1}play(){throw'method "play" must be implemented'}pause(){throw'method "pause" must be implemented'}stop(){throw'method "stop" must be implemented'}loop(e){throw'method "loop" must be implemented'}}class Pr extends Qe{constructor(o){super(o);W(this,"channel");this.channel=this.source}play(){this.isPlaying=!0,this.channel.play(),this.channel.onended=()=>{this.isPlaying=!1}}pause(){this.isPlaying=!1,this.channel.pause()}stop(){this.pause(),this.channel.currentTime=0}loop(o){this.channel.loop=o}}class Ir extends Qe{constructor(o){super(o);W(this,"channels");this.channels=new Set}checkTrackPaused(){return this.isPlaying}checkChannelsExist(){return this.channels.size>0}resume(){[...this.channels.values()].forEach(o=>{o.play()}),this.isPlaying=!0}playNewChannel(){const o=new Audio;o.src=this.source.src,this.channels.add(o),o.onended=()=>{this.channels.delete(o),this.channels.size===0&&(this.isPlaying=!1)},this.isPlaying=!0,o.play()}play(){!this.checkTrackPaused()&&this.checkChannelsExist()?this.resume():this.playNewChannel()}pause(){this.isPlaying=!1,[...this.channels.values()].forEach(o=>{o.pause()})}stop(){this.isPlaying=!1,[...this.channels.values()].forEach(o=>{o.pause(),this.channels.delete(o)})}}class nn{constructor(){W(this,"audios");this.audios=new Map,this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stop=this.stop.bind(this)}getTrackExist(e){return this.audios.has(e)}checkTrackExist(e){if(!this.getTrackExist(e))throw`track - ${e} doesn't exist`;return!0}checksBeforePlay(e){return this.checkTrackExist(e)}checkTrackDuplicate(e){if(this.getTrackExist(e))throw`track - ${e} already exist`}createTrack(e){return new Qe(e)}addTrack(e,o){this.audios.set(e,o)}add(e,o,i){this.checkTrackDuplicate(e);const d=this.createTrack(o);this.addTrack(e,d)}play(e){if(!this.checksBeforePlay(e))return;const o=this.audios.get(e);return o.play(),o}loop(e,o){this.audios.get(e).loop(o)}pause(e){const o=this.audios.get(e);return o.pause(),o}stop(e){const o=this.audios.get(e);return o.stop(),o}vol(e,o=1){const i=this.audios.get(e);i.source.volume=o}}class Xr extends nn{createTrack(e){return new Pr(e)}checkTrackAlreadyPlaying(e){return this.audios.get(e).isPlaying}checksBeforePlay(e){return super.checksBeforePlay(e)&&!this.checkTrackAlreadyPlaying(e)}}class Yr extends nn{createTrack(e){return new Ir(e)}}const j=new Yr;j.add("menuButtonHover",Mr);const Tr=""+new URL("wall_btn_press-DLMP_USe.mp3",import.meta.url).href,Rr=""+new URL("wall_btn_unpress-DK6S7Oyl.mp3",import.meta.url).href,Or=""+new URL("wallOpen-B0TEyY2m.mp3",import.meta.url).href,Ur=""+new URL("lvlBg1-BCpvHAv4.mp3",import.meta.url).href,Zr=""+new URL("lvlBg2-B6OrQPDs.mp3",import.meta.url).href,Fr=""+new URL("lvlBg3-DimI71Fj.mp3",import.meta.url).href,Dr=""+new URL("lvlBg4-DFBmE6BG.mp3",import.meta.url).href,Qr="data:audio/mpeg;base64,SUQzBAAAAAAAUlREUkMAAAAMAAADMjAwMS0wMS0wNQBUWFhYAAAADwAAA0lFTkcARGVlcHowbmUAVFNTRQAAAA8AAANMYXZmNTguNzYuMTAwAAAAAAAAAAAAAAD/+1DAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAA8AAA0OAB8fHx8fHy8vLy8vLy8/Pz8/Pz9PT09PT09PX19fX19fX29vb29vb39/f39/f3+Pj4+Pj4+Pn5+fn5+fr6+vr6+vr7+/v7+/v7/Pz8/Pz8/f39/f39/f7+/v7+/v7////////wAAAABMYXZjNTguMTMAAAAAAAAAAAAAAAAkBOIAAAAAAAANDsh5l4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//tQxAAACeCDJBWXgAGJlusDNPAAlbW2JyJKgwiDMMDDAuKb0BuICQi80H2bugyx4wDQE4eCfNNRwlYyXvfeKRNQ1YrHlM3vvEN/fdHjyJdWMkTXpTV3jwaD7wTD/y58ufhiGCQGaFmIiZxOxtVJt1psyJqAxImZCXojSf5et/nSk02IxDQlzh5uaCoYtns/ZGB+hisiEK3i+lremxkuqJY26Ujw5c0zHlf+Pt7eJvV/r/4+vrFPWHXUa6zSxc50lWY3/lbtKgAQqkCAiAVAG//7UsQEgAuRC1W9hAAhb5WoWaMJsceZOpvlqp1S5uL2RWXQ2+jS5TQTcCjgXQLMdBRVOpzH9josk3GmzSsdJc3d1G13d9RP9z+3u/z88z9x18TjoZriLuPiNruo4j+6RR1jqJMFAhAeoPAAC4dFKIRBZQBLhCDTxZy6D6PzBMIh2ERsBgpAsBEkyIaqstHFiUZIkayX+gYBiAZKec8z3MjDNd+BGaGagYMjWrMCOUGisuaRSylz0lr/3pQ7qiaiDN/0XrFVAQAAEAK4zrbjKwVA//tSxAYAi8CxOsywyQl7l6emsJABMip4R5oMdB8rDqJQjPHZLiN2VhEX9UwIRRGhhZUhkp0+bFOpsjnmpzBaefPiy15SUkF5WIRZzGzKl7PT1M1uKWAkUuIjpqWYH55xTJ0jlrf/kwAoABwGDErLeWnSPB8Wn31eeOO5SRWD5qpOYPDrQWPmoRZRRssmsZbgs2lSNyOVTbpCqgm0nH+Bmn3ubm5KVUzVesqOSldTnavxhkosFLcG63P9fLR/kmmapOO9/n60gmG2wAtOaID05mT/+1LEBYAL2K1IubeAAWcYJsO0gAFBo8YyHT7jgpWKgoDjZOaMZigWHCadTpx7GmenU0SaxPxbSxTvrQK16EjxQaEMUl7b+d4gP5G5f9fi1s/X7kqnB/BtX2+c//W994KlgywXc372aKjcCDhJzUOxJSZUgEBRIezVyXHfZ+3AXVOSpp1YQwMDkOgFWGCMQHuROHJUA25qIPlWY4+7skZqkXB07bbuTcq+3rfH3Gtd93k0MstyvH5Jhgk7QU+Elsrfv8o6tlNDTCinAIWwQdA4If/7UsQHAAvk+SwNmHNBeRemlbYY8YDCYEmmtN9M1Z6CKWru7DMzZjz/HE2AgodElIpQF0UW8D9kuVuZbZg5DpxtfMa9pqX2oCpCXFHF+SNhSHukoQwq2lM1t5Sj01GBwOcgq5pi5KGTEOccGxLcYyYGBjIgTBMDl3CWVx4E0aiIYGBtUuHh4vWnw6IaCS1keCAaoMIA6WUG61LJs1mJzdHh4fmTUnlOU/1odpjfOvbKfw65+fpgn+Nhn122DYGo2LgBj/SVAAhAIB0qOHMLrOYj//tSxAYAy5i1NI2wzsl7naahlI25OgqxWiYnUeSVP7M4sxfmpKWCNdA4wfJmYlxEXrRUus9VsIs5mq5uo7PGyRYPdbvJW6DtbP3QFrpZDMNvWNmBrdo8p7BF6M9/mvMqv6wT5Q5YQgFAGaP1rgXUpcu5skddh85BDNLbh5QRRmmSKIm0j0UkeBg9aJuZdd5AwHhxhsu9F8Vn6TXs9FtvcalIsgCKxVAiCELFRx0nBV6bEvZSNJI9BHHOllgzenjrPV/C99IFORQkAIbaAYQWD4P/+1LEBgDKfJc7bTDBiVSfJtGUjTBhHHQAGMOjNMBFfJOAi8RDBtoG4VerlQT7GyUaJxKkvOwapHJeHfN3NROuke//anpbeU78A3Sr4wzp0bqv22va++cbNp+DY/QBdSQAGJUvUZ1X4uC/rWsm9ISUmBpCTAkIxOSqWSsL5BXmrVF3Vl7kXgwJEEBhexJN1tccWUdXFvBHA9bJkOvKRN3ypddE3eU3/+fmTqoLDiAzGi+OCUdZIAADAd0IAyUJRFEEAcvmYqMQuLQ4DifFJtOidf/7UsQPgIo0kzmMMGHJTJamIaYM8WLRioYGxsp4o6ara5Pgqg5Uy9BWal5yOSuDahfVBAcsnxXP3uhZQhJp31ZdzrPbtTj0qDRAACGuNE2qRdqMWZg8JwKTo3BFeUoDFc/DbPbOJhWo0BmI47AVkLYxKiRdMrV1RxAEqOEdelLZCUyEsgxowVXQL9jhmO7nKWVQlOpiSXh3+V7qBVTjBCADAZWYjy1xy1AXedtsPXycCXwlnTmvPE4eCFQCSMQeGrBCMVa0TYhSEfd+pz62TDU8//tSxBsAieh9N40YbsFBlObtkw3ZACF4EM3gUgUNJUy0cfIEGJqi2lAoocWRYsKR1okEA+JEI+DWHQfZ8mZu3GYi6T0TdLE5mPiRRal6QvxHJInIponRhw1OLbUCX9MqlphoVamt3lM2XYe6ROH3I+3hT+yff+23NfQEHyZ23QY0W0CJgI/Jhk1ZQ6jzhMBEcSUT1hMMS6YrTA9O1qrXsuwuTQV2BG0Vrm10YF5qxk0DFLclWP0jPz4dErntw5TWxepRXfPTomJBi/wnK5IOn///+1LEKQAKUM01bLBlyUwg5jGmDHjA26oSQAAwGXkPOra7oPGy0GQcAFHGITji5lVpxWuz3mqCTgMjYxTgvV8IPJfJntXIjPdFVFZgyKhwk11jWWWGVl+GcMnjfOqRUtOZFUY0KQHfvtUJq0CAMTcOFsUrrSs9AkwQhgiGiIkPozET5+aqdyTs36EhuW0O0sHAMdmbVzbNxgExQ52AtWTVXF8Toicin2QImYoAkjp6A09urwsPWj7/0Y0uGADSNQfKhViuW7AEkdI4DN5EYaAfQf/7UsQ0AEoEwSsMpGXJPR+lYPMM+UJGh6k12olJs2Ns2f1cwzMZMxaa7OTM2QCp6rszAxQYelMiZmarkoZlVVX9VUmaakSqWwYFlGyqAIAA2cOBaAJxZZQwPXI9nWE6Bagq+qBrhgkgSKIISiarGtpZmdn/zNZaQ01687VVJX74NZLD39LpyEXl1/KuptoytlB2sf7PzrcuCqH1DbSoGDKWxKWE6Y7yh81ZcOFTaYFZueKAuBItBOqthmKMeQJTMSH1hhWchIdOhTUMzlFmBa7P//tSxEIDSgzNHqwkwckol6OFgwx5iIBEShTXFyBQ0NtfnV36r2csib2t/8oJwiygEGgqNYUaYLTGo6gSLcGQOPOPw7ktlbrNGyj0vrfPUmLK2Hb5oMlZcszdaU8tFBH67ucd3Oik2lZpCzVUXSQRIWl+/0gl/mblADggi7ssh5NbpUFG8kSpItUmXCbYhjkZ0BXE8olswjfAqwKJOGRQ2XtBMYjczPp9JByIiaodGPvUVSSnjbA2WIrOCBDCAIpaS5Z7dP9VAESiSAqFzOtAiij/+1LEUoOJgKcYDBjACTaXIw2DDHiQWR06ztI6gxiToM/FMCHx/B62SAxlGOrCS3dmFrH/S0kKFXoYaGkqB82YWYv/svd5v07v/+pL+V0Alx4Fsy1sdYqIeK55xeoyokUW1pkE5TKz3pyMsSnztQtKDtLr49RmfRjikDK4IwY1qOsWQUBM063WjGCNKRqqUoR+1WRmY1y6FcBB8qulBIBKlJCS0wBBTkUYqwCArhCAoaAolESztUlaWK/V9Oot5HLJ//1/T//PCIr61Hq/akxBTf/7UsRjggiMpRrsCGABOaAiAPMNeEUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//tSxHgDxhQbDGeYYIAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",Wr=""+new URL("pickingSword-Bqp9lTmr.mp3",import.meta.url).href,Nr="data:audio/mpeg;base64,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",Gr=""+new URL("torch1-BpZCX03b.mp3",import.meta.url).href,Vr=""+new URL("bugSound1-EMBBF4e7.mp3",import.meta.url).href,Kr=""+new URL("portalRoomSound-DQ8fU5AU.mp3",import.meta.url).href,zr=""+new URL("scrollOpen-6aM9WvK5.mp3",import.meta.url).href,Hr=""+new URL("closeScroll-DyWrKHh_.mp3",import.meta.url).href,jr=""+new URL("pickingSpell-CBS3eXs7.mp3",import.meta.url).href,Jr=""+new URL("transformSpell-B-sXcrcY.mp3",import.meta.url).href,_r=""+new URL("healSpell-CAjP4s2k.mp3",import.meta.url).href,$r=""+new URL("notEnoughMana-CdSSmsr4.mp3",import.meta.url).href,ta=""+new URL("awakening-IXf4Hg04.mp3",import.meta.url).href,ea=""+new URL("lvlEnd-CEbtbjIs.mp3",import.meta.url).href,oa="data:audio/mpeg;base64,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",na=""+new URL("menuBg-imybSe60.mp3",import.meta.url).href,sa=""+new URL("glassWallSound-C6Ngg83U.mp3",import.meta.url).href,ra=""+new URL("taskDoneOST-Btik36xs.mp3",import.meta.url).href,aa=""+new URL("scream-sound-CqeQI6YH.mp3",import.meta.url).href,A=new Xr;A.add("wall_btn_press",Tr);A.add("wall_btn_unpress",Rr);A.add("wall_opening",Or);A.add("lvlBg1",Ur);A.add("lvlBg2",Zr);A.add("lvlBg3",Fr);A.add("lvlBg4",Dr);A.add("playerSteps1",Qr);A.add("pickingSword",Wr);A.add("swordAttack",Nr);A.add("torch1",Gr);A.add("bugSound1",Vr);A.add("portalRoomSound",Kr);A.add("scrollRead",zr);A.add("scrollClose",Hr);A.add("pickingSpell",jr);A.add("transformSpell",Jr);A.add("healSpell",_r);A.add("notEnoughMana",$r);A.add("awakeningOST",ta);A.add("lvlEnd",ea);A.add("menuButtonClick",oa);A.add("menuBg",na);A.add("glassWallSound",sa);A.add("taskDone",ra);A.add("scream-sound",aa);class J{constructor({fps:e=60,callback:o,tolerance:i=.1}){W(this,"requestID");W(this,"fps");W(this,"callback");W(this,"interval");W(this,"thenTmp",0);W(this,"deltaTmp",0);W(this,"animateLoop",e=>{this.requestID=requestAnimationFrame(this.animateLoop),this.deltaTmp=e-this.thenTmp,this.deltaTmp>=this.interval&&(this.thenTmp=e-this.deltaTmp%this.interval,this.callback(this.deltaTmp))});this.requestID=0,this.fps=e,this.callback=o,this.interval=1e3/this.fps-i}start(){this.thenTmp=performance.now(),this.requestID=requestAnimationFrame(this.animateLoop)}stop(){cancelAnimationFrame(this.requestID)}}let Mo,Et=document.getElementById("fpsTourWrap").getElementsByClassName("fpsTourValue")[0],be,Ae=null,Vt,sn;const ia=()=>{rn(Vt),la()},la=()=>{Vt<30?Et.style.color="red":Vt<45?Et.style.color="orange":Et.style.color="lime"},ca=()=>{Et.style.color="white"},rn=t=>{Et.textContent=String(t)},Aa=()=>{Ae=performance.now(),Vt=Math.floor(1e3/(Ae-be)),be=Ae},ua=()=>{Aa()},an=new J({callback:ua,fps:60}),da=(t=0)=>{be=performance.now(),Mo=t,an.start(),sn=setInterval(ia,Mo)},qa=()=>{clearInterval(sn),an.stop(),rn(0),ca()},ln=document.getElementById("fpsTourWrap"),pa=document.getElementById("camera");let Ee;const ha=()=>(ln.classList.remove("hide"),da(1e3),Ee=pa.animate([{transform:"rotateX(0deg) rotateY(90deg) translateX(400px) translateZ(-135px)"},{transform:"rotateX(0deg) rotateY(125deg) translateX(-720px) translateZ(-135px)"},{transform:"rotateX(0deg) rotateY(165deg) translateX(-720px) translateZ(-135px)"},{transform:"rotateX(0deg) rotateY(6deg) translateX(-910px) translateZ(793px)"},{transform:"rotateX(11deg) rotateY(10deg) translateX(-800px) translateZ(593px)"},{transform:"rotateX(14deg) rotateY(-45deg) translateX(-965px) translateZ(680px)"},{transform:"rotateX(-3deg) rotateY(-180deg) translateX(-965px) translateZ(300px)"},{transform:"rotateX(-3deg) rotateY(-180deg) translateX(-965px) translateZ(100px)"}],{duration:35e3}),Ee),ma=()=>{ln.classList.add("hide"),Ee.cancel(),qa()},fa=document.getElementById("UISection"),ya=()=>{fa.classList.remove("hide")};let cn=0,An=0,un=0,dn=0,qn=0,pn=0,hn=0;const dt=()=>cn,qt=()=>An,va=()=>un,vt=t=>{cn=t},gt=t=>{An=t},We=t=>{un=t},Ne=()=>dn,mn=()=>qn,_t=()=>pn,fn=()=>hn,ga=t=>{dn=t},wa=t=>{qn=t},Sa=t=>{pn=t},xa=t=>{hn=t};let yn=0,vn=0;const Ba=({x:t,y:e,z:o})=>{yn=t,vn=o},Ge=()=>dt()-yn,Ve=()=>qt()-vn;class rt{constructor(){W(this,"subscribers");this.subscribers=[]}subscribe(e){this.subscribers.push(e)}unsubscribe(e){this.subscribers=this.subscribers.filter(o=>o!==e)}broadcast(e){this.subscribers.forEach(o=>o(e))}}const ka=30;let gn=30,wn=30,Sn=0,xn=1,Bn=0,kn=1,bn=0,En=0;const Cn=()=>ka,at=()=>gn,it=()=>wn,ba=()=>Sn,Ea=()=>xn,Ca=()=>Bn,La=()=>kn,Ln=()=>bn,Mn=()=>En,$t=t=>{gn=t},te=t=>{wn=t},Ma=t=>{Sn=t},Pa=t=>{xn=t},Ia=t=>{Bn=t},Xa=t=>{kn=t},Ya=t=>{bn=t},Ta=t=>{En=t},_=new rt;let Ke,G=!1,ze,V=!1;const Ra=()=>{gt(Math.floor(qt()+it()*La())),vt(Math.floor(dt()+at()*Ca()))},Oa=()=>{gt(Math.floor(qt()+it()*Ea())),vt(Math.floor(dt()+at()*ba()))},Ua=()=>{G=!0,V===!1&&_.broadcast(!0),Ke=Po,Po.start()},Za=()=>{G=!0,V===!1&&_.broadcast(!0),Ke=Io,Io.start()},Ce=()=>{G=!1,Ke.stop(),V===!1&&_.broadcast(!1)},Po=new J({callback:Oa,fps:30}),Io=new J({callback:Ra,fps:30}),Fa=()=>{vt(Math.floor(dt()-at()*Ln())),gt(Math.floor(qt()-it()*Mn()))},Da=()=>{vt(Math.floor(dt()+at()*Ln())),gt(Math.floor(qt()+it()*Mn()))},Qa=()=>{V=!0,G===!1&&_.broadcast(!0),ze=Yo,Yo.start()},Wa=()=>{V=!0,G===!1&&_.broadcast(!0),ze=Xo,Xo.start()},Le=()=>{V=!1,ze.stop(),G===!1&&_.broadcast(!1)},Xo=new J({callback:Da,fps:30}),Yo=new J({callback:Fa,fps:30}),Kt=Cn()/-3.75;let ct=!1;const Dt=()=>{ct=!0,$t(at()+Kt),te(it()+Kt)},bt=()=>{ct=!1,$t(at()-Kt),te(it()-Kt)},Pn=t=>{if(t.code==="KeyW"){if(G)return;V&&Dt(),Ua();return}else if(t.code==="KeyS"){if(G)return;V&&Dt(),Za();return}else if(t.code==="KeyA"){if(V)return;G&&Dt(),Qa();return}else if(t.code==="KeyD"){if(V)return;G&&Dt(),Wa();return}},In=t=>{if(t.code==="KeyW"){if(!G)return;ct&&bt(),Ce()}else if(t.code==="KeyS"){if(!G)return;ct&&bt(),Ce()}else if(t.code==="KeyA"){if(!V)return;ct&&bt(),Le()}else if(t.code==="KeyD"){if(!V)return;ct&&bt(),Le()}},Na=()=>{window.addEventListener("keydown",Pn),window.addEventListener("keyup",In)},Ga=()=>{window.removeEventListener("keydown",Pn),window.removeEventListener("keyup",In)},Va=()=>{G&&Ce(),V&&Le(),ct&&bt()},Xt=new Map,D=(t,e)=>{Xt.set(t,e)},st=t=>{Xt.delete(t)},Xn=t=>{const e=Xt.get(t);if(!e)throw`unknown item - ${t}`;e.isActive=!1},Ka=()=>{Xt.forEach(t=>{t.deactivationCallback(),t.isActive=!1})};let Me,Pe;const ee=()=>{Me=Ge(),Pe=Ve();let t;Xt.forEach(e=>{if(t=za(e),t){if(e.isActive)return;e.isActive=!0,e.activationCallback();return}else if(e.isActive){e.isActive=!1,e.deactivationCallback();return}})},za=t=>Me>=t.minX&&Me<=t.maxX&&Pe>=t.minZ&&Pe<=t.maxZ,Ha=()=>{Rn.start()},Yn=()=>{Rn.stop()},Tn=t=>{t?Ha():Yn()},Rn=new J({callback:ee,fps:10}),On=()=>{_.subscribe(Tn)},ja=()=>{_.unsubscribe(Tn)},Un=document.getElementById("hpBar");let Ct=0;const Zn=()=>{Un.animate([{opacity:.5},{opacity:1},{opacity:.5}],{duration:500})},Ja=t=>{Ct=t,Zn(),Fn()},_a=t=>{Ct+=t,Ct>100&&(Ct=100),Zn(),Fn()},Fn=()=>{Un.style.setProperty("--hpValue",`${Ct}%`)},oe=document.getElementById("subPanelsSection"),He={controlsSection:document.getElementById("controlsSection"),aboutSection:document.getElementById("aboutSection"),touchScreenMSG:document.getElementById("touchScreenMSG"),userEntryCautionView:document.getElementById("userEntryCautionView")};let zt=null;const $a=()=>{oe.classList.remove("hide")},ti=()=>{oe.classList.add("hide")},ei=t=>{const e=He[t];if(!e)throw`unknown sub panel - ${t}`;e.classList.remove("hide"),zt=t},oi=t=>{const e=He[t];if(!e)throw`unknown sub panel - ${t}`;e.classList.add("hide"),zt=t},ft=t=>{ei(t),$a()},Dn=t=>{oi(t),ti()},ni=({target:t})=>{t.classList.contains("subPanelsSection_closeButton")&&(Dn(zt),zt=null,A.play("menuButtonClick"),A.vol("menuButtonClick",.5))};oe.addEventListener("click",ni);const si=({target:t})=>{t.classList.contains("subPanelsSection_closeButton")&&(j.play("menuButtonHover"),j.vol("menuButtonHover"))};oe.addEventListener("mouseover",si);const To=document.getElementById("infoIcon"),ri=t=>{t.stopPropagation(),A.play("menuButtonClick"),A.vol("menuButtonClick",.5),ft("controlsSection")},ai=()=>{j.play("menuButtonHover"),j.vol("menuButtonHover",.5)},ii=t=>{if(t.code==="KeyI"){if(He.controlsSection.classList.contains("hide")){li();return}ci()}},li=()=>{A.play("menuButtonClick"),A.vol("menuButtonClick",.5),ft("controlsSection")},ci=()=>{A.play("menuButtonClick"),A.vol("menuButtonClick",.5),Dn("controlsSection")},Ai=()=>{To.addEventListener("mouseover",ai),To.addEventListener("click",ri),window.addEventListener("keydown",ii)},Qn=document.getElementById("manaBar"),ui=3,di=500;let $=0,Wn=null;const qi=t=>{$=t,je()},Nn=()=>{Qn.animate([{opacity:.5},{opacity:1},{opacity:.5}],{duration:500})},Gn=()=>$,Vn=t=>{t<=$?$-=t:$=0,je()},pi=t=>{$+=t,$>100&&($=100),je()},je=()=>{Qn.style.setProperty("--manaValue",`${$}%`)},hi=()=>{Wn=setInterval(pi,di,ui)},mi=()=>{clearInterval(Wn)},Je=document.getElementById("pointerLockInaccessibleIcon");let Ie=!1;const fi=async()=>{Ie||(vi(),await yi(),gi())},yi=()=>{Ie=!0;const t=Je.animate([{transform:"scale(1)"},{transform:"scale(0.7)"},{transform:"scale(1)"}],{duration:1e3});return t.finished.then(()=>{Ie=!1}),t.finished},vi=()=>{Je.classList.remove("hide")},gi=()=>{Je.classList.add("hide")},wi=(t,e)=>Math.random()*(e-t)+t|0;var on;const Si=(on=new Array(["Microsoft Edge",/edg/i],["Microsoft Internet Explorer",/trident/i],["Mozilla Firefox",/firefox|fxios/i],["Opera",/opr\//i],["UC Browser",/ucbrowser/i],["Samsung Browser",/samsungbrowser/i],["Google Chrome",/chrome|chromium|crios/i],["Apple Safari",/safari/i],["Unknown",/.+/i]).find(([,t])=>t.test(window.navigator.userAgent)))==null?void 0:on.shift(),xi=()=>Si,At=new rt,Kn=document.body.requestPointerLock.bind(document.body),zn=()=>{document.pointerLockElement===document.body?At.broadcast(!0):At.broadcast(!1)},Bi=()=>{Kn().catch(fi)},ki=()=>{Kn()};let bi=xi()==="Google Chrome"?Bi:ki;const ne=()=>{bi()},Hn=()=>{document.exitPointerLock()},Ei=()=>{document.addEventListener("pointerlockchange",zn),document.addEventListener("click",ne)},Ci=()=>{document.removeEventListener("pointerlockchange",zn),document.removeEventListener("click",ne)};let jn=!1;const Li=t=>{jn=t},Mi=()=>{At.subscribe(Li)},Jn=()=>jn,Mt=document.getElementById("movementBar");let Nt;const _n=t=>{t&&Mt.classList.remove(t),Nt=t,Mt.classList.add(t)},$n=()=>{Mt.classList.remove("hide")},ts=()=>{Mt.classList.add("hide"),Nt&&(Mt.classList.remove(Nt),Nt=null)};let Pi=0,es=0,Ii=0;const Xi=()=>Pi,_e=()=>es,Yi=()=>Ii,os=t=>{es=t},$e=new rt,Ht=Cn()/1.5;let to=!0,yt=!1;const ns=()=>yt,Ti=()=>{to&&(yt=!0,te(it()+Ht),$t(at()+Ht),$e.broadcast(yt),_n("run"),$n())},ss=()=>{yt=!1,te(it()-Ht),$t(at()-Ht),$e.broadcast(yt),ts()},rs=()=>{to=!1,yt&&ss()},as=()=>{to=!0},is=150;let jt=!1;const ls=()=>jt,Ri=()=>{jt=!0,os(_e()-is),rs(),_n("squat"),$n()},eo=()=>{jt&&(jt=!1,os(_e()+is),as(),ts())},cs=t=>{ls()||t.code==="KeyC"&&Ri()},As=t=>{ls()&&t.code==="KeyC"&&eo()},us=()=>{window.addEventListener("keydown",cs),window.addEventListener("keyup",As)},ds=()=>{window.removeEventListener("keydown",cs),window.removeEventListener("keyup",As)};let qs,ps;const Oi=()=>qs,Ui=()=>ps,Zi=t=>{ps=t},Fi=t=>{qs=t},hs=new rt,ms=()=>{const t=visualViewport.height!==Oi(),e=visualViewport.width!==Ui();Fi(visualViewport.height),Zi(visualViewport.width),hs.broadcast({height:visualViewport.height,width:visualViewport.width,heightChanged:t,widthChanged:e})};visualViewport.addEventListener("resize",ms);const fs=document.getElementById("playerHands"),ys=document.getElementById("playerHandsWrap"),Di=document.getElementById("playerHandsInner"),Qi=t=>Math.floor(t/1.3)/4,Wi=({height:t})=>{fs.style.height=t+"px",Di.style.transform=`
    translateX(${Qi(t)}px) 
    translateY(12%)`},vs=()=>{ys.classList.add("show")},Ni=()=>{ys.classList.remove("show")};hs.subscribe(Wi);let ue=!1,gs=!1;const Gi=t=>gs=t,oo=()=>gs,ws=async()=>{ue||(ue=!0,A.play("swordAttack"),A.vol("swordAttack",.4),await Vi(),ue=!1)},Ro=`
  rotateX(0deg) 
  rotateY(0deg) 
  rotateZ(0deg) 
  translateY(0px)
  translateX(0px)  
  skew(0deg, 0deg)
  scale(1)`,Oo=`
  rotateX(0deg) 
  rotateY(0deg) 
  rotateZ(15deg) 
  translateY(-150px)
  translateX(0px)  
  skew(0deg, -0deg)
  scale(1)`,Uo=`
  rotateX(70deg)         
  rotateY(-50deg)         
  rotateZ(-20deg)         
  translateY(-3px)        
  translateX(0px)          
  skew(0deg, -30deg)        
  scale(1)`,de=(t,e,o)=>fs.animate([{transform:t},{transform:e}],{duration:o}).finished,Vi=async()=>{await de(Ro,Oo,120),await de(Oo,Uo,150),await de(Uo,Ro,230)};let Xe=!1;const no=()=>{Xe||Zl()||(Xe=!0,window.addEventListener("click",ws))},so=()=>{Xe=!1,window.removeEventListener("click",ws)};var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ro={},tt={},Ss={exports:{}};(function(t,e){/** @preserve SAT.js - Version 0.9.0 - Copyright 2012 - 2021 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */(function(o,i){t.exports=i()})(nt,function(){var o={};function i(n,l){this.x=n||0,this.y=l||0}o.Vector=i,o.V=i,i.prototype.copy=i.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},i.prototype.clone=i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.perp=i.prototype.perp=function(){var n=this.x;return this.x=this.y,this.y=-n,this},i.prototype.rotate=i.prototype.rotate=function(n){var l=this.x,r=this.y;return this.x=l*Math.cos(n)-r*Math.sin(n),this.y=l*Math.sin(n)+r*Math.cos(n),this},i.prototype.reverse=i.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.normalize=i.prototype.normalize=function(){var n=this.len();return n>0&&(this.x=this.x/n,this.y=this.y/n),this},i.prototype.add=i.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},i.prototype.sub=i.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},i.prototype.scale=i.prototype.scale=function(n,l){return this.x*=n,this.y*=typeof l<"u"?l:n,this},i.prototype.project=i.prototype.project=function(n){var l=this.dot(n)/n.len2();return this.x=l*n.x,this.y=l*n.y,this},i.prototype.projectN=i.prototype.projectN=function(n){var l=this.dot(n);return this.x=l*n.x,this.y=l*n.y,this},i.prototype.reflect=i.prototype.reflect=function(n){var l=this.x,r=this.y;return this.project(n).scale(2),this.x-=l,this.y-=r,this},i.prototype.reflectN=i.prototype.reflectN=function(n){var l=this.x,r=this.y;return this.projectN(n).scale(2),this.x-=l,this.y-=r,this},i.prototype.dot=i.prototype.dot=function(n){return this.x*n.x+this.y*n.y},i.prototype.len2=i.prototype.len2=function(){return this.dot(this)},i.prototype.len=i.prototype.len=function(){return Math.sqrt(this.len2())};function d(n,l){this.pos=n||new i,this.r=l||0,this.offset=new i}o.Circle=d,d.prototype.getAABBAsBox=d.prototype.getAABBAsBox=function(){var n=this.r,l=this.pos.clone().add(this.offset).sub(new i(n,n));return new x(l,n*2,n*2)},d.prototype.getAABB=d.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},d.prototype.setOffset=d.prototype.setOffset=function(n){return this.offset=n,this};function c(n,l){this.pos=n||new i,this.angle=0,this.offset=new i,this.setPoints(l||[])}o.Polygon=c,c.prototype.setPoints=c.prototype.setPoints=function(n){var l=!this.points||this.points.length!==n.length;if(l){var r,h=this.calcPoints=[],p=this.edges=[],S=this.normals=[];for(r=0;r<n.length;r++){var B=n[r],q=r<n.length-1?n[r+1]:n[0];if(B!==q&&B.x===q.x&&B.y===q.y){n.splice(r,1),r-=1;continue}h.push(new i),p.push(new i),S.push(new i)}}return this.points=n,this._recalc(),this},c.prototype.setAngle=c.prototype.setAngle=function(n){return this.angle=n,this._recalc(),this},c.prototype.setOffset=c.prototype.setOffset=function(n){return this.offset=n,this._recalc(),this},c.prototype.rotate=c.prototype.rotate=function(n){for(var l=this.points,r=l.length,h=0;h<r;h++)l[h].rotate(n);return this._recalc(),this},c.prototype.translate=c.prototype.translate=function(n,l){for(var r=this.points,h=r.length,p=0;p<h;p++)r[p].x+=n,r[p].y+=l;return this._recalc(),this},c.prototype._recalc=function(){var n=this.calcPoints,l=this.edges,r=this.normals,h=this.points,p=this.offset,S=this.angle,B=h.length,q;for(q=0;q<B;q++){var L=n[q].copy(h[q]);L.x+=p.x,L.y+=p.y,S!==0&&L.rotate(S)}for(q=0;q<B;q++){var P=n[q],O=q<B-1?n[q+1]:n[0],F=l[q].copy(O).sub(P);r[q].copy(F).perp().normalize()}return this},c.prototype.getAABBAsBox=c.prototype.getAABBAsBox=function(){for(var n=this.calcPoints,l=n.length,r=n[0].x,h=n[0].y,p=n[0].x,S=n[0].y,B=1;B<l;B++){var q=n[B];q.x<r?r=q.x:q.x>p&&(p=q.x),q.y<h?h=q.y:q.y>S&&(S=q.y)}return new x(this.pos.clone().add(new i(r,h)),p-r,S-h)},c.prototype.getAABB=c.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},c.prototype.getCentroid=c.prototype.getCentroid=function(){for(var n=this.calcPoints,l=n.length,r=0,h=0,p=0,S=0;S<l;S++){var B=n[S],q=S===l-1?n[0]:n[S+1],L=B.x*q.y-q.x*B.y;r+=(B.x+q.x)*L,h+=(B.y+q.y)*L,p+=L}return p=p*3,r=r/p,h=h/p,new i(r,h)};function x(n,l,r){this.pos=n||new i,this.w=l||0,this.h=r||0}o.Box=x,x.prototype.toPolygon=x.prototype.toPolygon=function(){var n=this.pos,l=this.w,r=this.h;return new c(new i(n.x,n.y),[new i,new i(l,0),new i(l,r),new i(0,r)])};function E(){this.a=null,this.b=null,this.overlapN=new i,this.overlapV=new i,this.clear()}o.Response=E,E.prototype.clear=E.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var k=[],Y=0;Y<10;Y++)k.push(new i);for(var X=[],Y=0;Y<5;Y++)X.push([]);var N=new E,v=new x(new i,1e-6,1e-6).toPolygon();function w(n,l,r){for(var h=Number.MAX_VALUE,p=-Number.MAX_VALUE,S=n.length,B=0;B<S;B++){var q=n[B].dot(l);q<h&&(h=q),q>p&&(p=q)}r[0]=h,r[1]=p}function b(n,l,r,h,p,S){var B=X.pop(),q=X.pop(),L=k.pop().copy(l).sub(n),P=L.dot(p);if(w(r,p,B),w(h,p,q),q[0]+=P,q[1]+=P,B[0]>q[1]||q[0]>B[1])return k.push(L),X.push(B),X.push(q),!0;if(S){var O=0;if(B[0]<q[0])if(S.aInB=!1,B[1]<q[1])O=B[1]-q[0],S.bInA=!1;else{var F=B[1]-q[0],Q=q[1]-B[0];O=F<Q?F:-Q}else if(S.bInA=!1,B[1]>q[1])O=B[0]-q[1],S.aInB=!1;else{var F=B[1]-q[0],Q=q[1]-B[0];O=F<Q?F:-Q}var R=Math.abs(O);R<S.overlap&&(S.overlap=R,S.overlapN.copy(p),O<0&&S.overlapN.reverse())}return k.push(L),X.push(B),X.push(q),!1}o.isSeparatingAxis=b;function M(n,l){var r=n.len2(),h=l.dot(n);return h<0?C:h>r?s:T}var C=-1,T=0,s=1;function a(n,l){var r=k.pop().copy(n).sub(l.pos).sub(l.offset),h=l.r*l.r,p=r.len2();return k.push(r),p<=h}o.pointInCircle=a;function u(n,l){v.pos.copy(n),N.clear();var r=g(v,l,N);return r&&(r=N.aInB),r}o.pointInPolygon=u;function m(n,l,r){var h=k.pop().copy(l.pos).add(l.offset).sub(n.pos).sub(n.offset),p=n.r+l.r,S=p*p,B=h.len2();if(B>S)return k.push(h),!1;if(r){var q=Math.sqrt(B);r.a=n,r.b=l,r.overlap=p-q,r.overlapN.copy(h.normalize()),r.overlapV.copy(h).scale(r.overlap),r.aInB=n.r<=l.r&&q<=l.r-n.r,r.bInA=l.r<=n.r&&q<=n.r-l.r}return k.push(h),!0}o.testCircleCircle=m;function f(n,l,r){for(var h=k.pop().copy(l.pos).add(l.offset).sub(n.pos),p=l.r,S=p*p,B=n.calcPoints,q=B.length,L=k.pop(),P=k.pop(),O=0;O<q;O++){var F=O===q-1?0:O+1,Q=O===0?q-1:O-1,R=0,St=null;L.copy(n.edges[O]),P.copy(h).sub(B[O]),r&&P.len2()>S&&(r.aInB=!1);var ht=M(L,P);if(ht===C){L.copy(n.edges[Q]);var le=k.pop().copy(h).sub(B[Q]);if(ht=M(L,le),ht===s){var z=P.len();if(z>p)return k.push(h),k.push(L),k.push(P),k.push(le),!1;r&&(r.bInA=!1,St=P.normalize(),R=p-z)}k.push(le)}else if(ht===s){if(L.copy(n.edges[F]),P.copy(h).sub(B[F]),ht=M(L,P),ht===C){var z=P.len();if(z>p)return k.push(h),k.push(L),k.push(P),!1;r&&(r.bInA=!1,St=P.normalize(),R=p-z)}}else{var ce=L.perp().normalize(),z=P.dot(ce),xr=Math.abs(z);if(z>0&&xr>p)return k.push(h),k.push(ce),k.push(P),!1;r&&(St=ce,R=p-z,(z>=0||R<2*p)&&(r.bInA=!1))}St&&r&&Math.abs(R)<Math.abs(r.overlap)&&(r.overlap=R,r.overlapN.copy(St))}return r&&(r.a=n,r.b=l,r.overlapV.copy(r.overlapN).scale(r.overlap)),k.push(h),k.push(L),k.push(P),!0}o.testPolygonCircle=f;function y(n,l,r){var h=f(l,n,r);if(h&&r){var p=r.a,S=r.aInB;r.overlapN.reverse(),r.overlapV.reverse(),r.a=r.b,r.b=p,r.aInB=r.bInA,r.bInA=S}return h}o.testCirclePolygon=y;function g(n,l,r){for(var h=n.calcPoints,p=h.length,S=l.calcPoints,B=S.length,q=0;q<p;q++)if(b(n.pos,l.pos,h,S,n.normals[q],r))return!1;for(var q=0;q<B;q++)if(b(n.pos,l.pos,h,S,l.normals[q],r))return!1;return r&&(r.a=n,r.b=l,r.overlapV.copy(r.overlapN).scale(r.overlap)),!0}return o.testPolygonPolygon=g,o})})(Ss);var Yt=Ss.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Types=t.Response=void 0;var e=Yt;Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return e.Response}}),function(o){o.Ellipse="Ellipse",o.Line="Line",o.Circle="Circle",o.Box="Box",o.Point="Point",o.Polygon="Polygon"}(t.Types||(t.Types={}))})(tt);var Tt={},I={},xt={},Bt={},Zo;function Rt(){if(Zo)return Bt;Zo=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.Polygon=void 0;const t=Yt,e=tt,o=pt();class i extends t.Polygon{constructor(c,x){if(super((0,o.ensureVectorPoint)(c),(0,o.ensurePolygonPoints)(x)),this.type=e.Types.Polygon,!(x!=null&&x.length))throw new Error("No points in polygon");this.updateAABB()}get x(){return this.pos.x}set x(c){var x;this.pos.x=c,(x=this.system)===null||x===void 0||x.updateBody(this)}get y(){return this.pos.y}set y(c){var x;this.pos.y=c,(x=this.system)===null||x===void 0||x.updateBody(this)}setPosition(c,x){var E;this.pos.x=c,this.pos.y=x,(E=this.system)===null||E===void 0||E.updateBody(this)}updateAABB(){const{pos:c,w:x,h:E}=this.getAABBAsBox();this.minX=c.x,this.minY=c.y,this.maxX=c.x+x,this.maxY=c.y+E}draw(c){[...this.calcPoints,this.calcPoints[0]].forEach((E,k)=>{const Y=this.pos.x+E.x,X=this.pos.y+E.y,N=this.calcPoints[k-1]||this.calcPoints[this.calcPoints.length-1];if(!k)this.calcPoints.length===1?c.arc(Y,X,1,0,Math.PI*2):c.moveTo(Y,X);else if(this.calcPoints.length>1)if(this.isTrigger){const v=this.pos.x+N.x,w=this.pos.y+N.y;(0,o.dashLineTo)(c,v,w,Y,X)}else c.lineTo(Y,X)})}}return Bt.Polygon=i,Bt}var Fo;function ao(){if(Fo)return xt;Fo=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.Line=void 0;const t=tt,e=Rt();class o extends e.Polygon{constructor(d,c){if(super({x:(d.x+c.x)/2,y:(d.y+c.y)/2},[{x:-(c.x-d.x)/2,y:-(c.y-d.y)/2},{x:(c.x-d.x)/2,y:(c.y-d.y)/2}]),this.type=t.Types.Line,this.calcPoints.length===1||!c)throw console.error({start:d,end:c}),new Error("No end point for line provided")}get start(){return{x:this.x+this.calcPoints[0].x,y:this.y+this.calcPoints[0].y}}get end(){return{x:this.x+this.calcPoints[1].x,y:this.y+this.calcPoints[1].y}}}return xt.Line=o,xt}var Do;function pt(){if(Do)return I;Do=1,Object.defineProperty(I,"__esModule",{value:!0}),I.intersectLinePolygon=I.intersectLineLine=I.intersectLineCircle=I.dashLineTo=I.clockwise=I.distance=I.ensurePolygonPoints=I.ensureVectorPoint=I.createBox=I.createEllipse=void 0;const t=Yt,e=ao();function o(v,w=v,b=1){const M=Math.PI*Math.hypot(v,w)*2,C=Math.max(8,Math.ceil(M/b));return Array.from({length:C},(T,s)=>{const a=s/C*2*Math.PI,u=Math.cos(a)*v,m=Math.sin(a)*w;return new t.Vector(u,m)})}I.createEllipse=o;function i(v,w){return[new t.Vector(0,0),new t.Vector(v,0),new t.Vector(v,w),new t.Vector(0,w)]}I.createBox=i;function d(v={}){return v instanceof t.Vector?v:new t.Vector(v.x||0,v.y||0)}I.ensureVectorPoint=d;function c(v){if(!v)throw new Error("No points array provided");const w=v.map(d);return E(w)?w.reverse():w}I.ensurePolygonPoints=c;function x(v,w){return Math.hypot(v.x-w.x,v.y-w.y)}I.distance=x;function E(v){let w=0;for(let b=0;b<v.length;b++){const M=v[b],C=v[(b+1)%v.length];w+=(C.x-M.x)*(C.y+M.y)}return w>0}I.clockwise=E;function k(v,w,b,M,C,T=2,s=4){const a=M-w,u=C-b,m=Math.atan2(u,a),f=Math.cos(m),y=Math.sin(m);let g=w,n=b,l=Math.hypot(a,u);for(;l>0;){const r=Math.min(l,T);v.moveTo(g,n),v.lineTo(g+f*r,n+y*r),g+=f*(T+s),n+=y*(T+s),l-=T+s}}I.dashLineTo=k;function Y(v,w){const b={x:v.end.x-v.start.x,y:v.end.y-v.start.y},M={x:v.start.x-w.pos.x,y:v.start.y-w.pos.y},C=(b.x*M.x+b.y*M.y)*-2,T=(b.x*b.x+b.y*b.y)*2,s=Math.sqrt(C*C-(M.x*M.x+M.y*M.y-w.r*w.r)*T*2);if(isNaN(s))return[];const a=(C-s)/T,u=(C+s)/T,m=[];return a<=1&&a>=0&&m.push({x:v.start.x+b.x*a,y:v.start.y+b.y*a}),u<=1&&u>=0&&m.push({x:v.start.x+b.x*u,y:v.start.y+b.y*u}),m}I.intersectLineCircle=Y;function X(v,w){const b=v.end.x-v.start.x,M=v.end.y-v.start.y,C=b*(w.end.y-w.start.y)-(w.end.x-w.start.x)*M;if(C===0)return null;const T=((w.end.y-w.start.y)*(w.end.x-v.start.x)+(w.start.x-w.end.x)*(w.end.y-v.start.y))/C,s=((v.start.y-v.end.y)*(w.end.x-v.start.x)+b*(w.end.y-v.start.y))/C;return!(T>=0&&T<=1)||!(s>=0&&s<=1)?null:{x:v.start.x+T*b,y:v.start.y+T*M}}I.intersectLineLine=X;function N(v,w){return w.calcPoints.map((b,M)=>{const C=M?w.calcPoints[M-1]:w.calcPoints[w.calcPoints.length-1],T=new e.Line({x:C.x+w.pos.x,y:C.y+w.pos.y},{x:b.x+w.pos.x,y:b.y+w.pos.y});return X(v,T)}).filter(b=>!!b)}return I.intersectLinePolygon=N,I}Object.defineProperty(Tt,"__esModule",{value:!0});Tt.Circle=void 0;const Ki=Yt,zi=tt,Qo=pt();class Hi extends Ki.Circle{constructor(e,o){super((0,Qo.ensureVectorPoint)(e),o),this.type=zi.Types.Circle,this.updateAABB()}get x(){return this.pos.x}set x(e){var o;this.pos.x=e,(o=this.system)===null||o===void 0||o.updateBody(this)}get y(){return this.pos.y}set y(e){var o;this.pos.y=e,(o=this.system)===null||o===void 0||o.updateBody(this)}setPosition(e,o){var i;this.pos.x=e,this.pos.y=o,(i=this.system)===null||i===void 0||i.updateBody(this)}updateAABB(){this.minX=this.pos.x-this.r,this.minY=this.pos.y-this.r,this.maxX=this.pos.x+this.r,this.maxY=this.pos.y+this.r}draw(e){const o=this.r;if(this.isTrigger){const i=Math.max(8,o);for(let d=0;d<i;d++){const c=d/i*2*Math.PI,x=(d-1)/i*2*Math.PI,E=this.pos.x+Math.cos(x)*o,k=this.pos.y+Math.sin(x)*o,Y=this.pos.x+Math.cos(c)*o,X=this.pos.y+Math.sin(c)*o;(0,Qo.dashLineTo)(e,E,k,Y,X)}}else e.moveTo(this.pos.x+o,this.pos.y),e.arc(this.pos.x,this.pos.y,o,0,Math.PI*2)}}Tt.Circle=Hi;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Ellipse=void 0;const ji=tt,Qt=pt(),Ji=Rt();class _i extends Ji.Polygon{constructor(e,o,i=o,d=Math.hypot(o,i)/Math.PI){super(e,(0,Qt.createEllipse)(o,i,d)),this.type=ji.Types.Ellipse,this._radiusX=o,this._radiusY=i,this._step=d}get step(){return this._step}set step(e){this._step=e,this.setPoints((0,Qt.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusX(){return this._radiusX}set radiusX(e){this._radiusX=e,this.setPoints((0,Qt.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusY(){return this._radiusY}set radiusY(e){this._radiusY=e,this.setPoints((0,Qt.createEllipse)(this._radiusX,this._radiusY,this._step))}}Ot.Ellipse=_i;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.Box=void 0;const $i=tt,qe=pt(),tl=Rt();class el extends tl.Polygon{constructor(e,o,i){super(e,(0,qe.createBox)(o,i)),this.type=$i.Types.Box,this._width=o,this._height=i}get width(){return this._width}set width(e){this._width=e,this.setPoints((0,qe.createBox)(this._width,this._height))}get height(){return this._height}set height(e){this._height=e,this.setPoints((0,qe.createBox)(this._width,this._height))}getCentroidWithoutRotation(){const e=this.angle;this.setAngle(0);const o=this.getCentroid();return this.setAngle(e),o}center(){const e=this.points[0];if(e.x!==0||e.y!==0)return;const{x:o,y:i}=this.getCentroidWithoutRotation();this.translate(-o,-i),this.setPosition(this.pos.x+o,this.pos.y+i)}}wt.Box=el;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.Point=void 0;const ol=wt,nl=tt,sl=pt();class rl extends ol.Box{constructor(e){super((0,sl.ensureVectorPoint)(e),.1,.1),this.type=nl.Types.Point}}Ut.Point=rl;var se={},xs={exports:{}};(function(t,e){(function(o,i){t.exports=i()})(nt,function(){function o(s,a,u,m,f){(function y(g,n,l,r,h){for(;r>l;){if(r-l>600){var p=r-l+1,S=n-l+1,B=Math.log(p),q=.5*Math.exp(2*B/3),L=.5*Math.sqrt(B*q*(p-q)/p)*(S-p/2<0?-1:1),P=Math.max(l,Math.floor(n-S*q/p+L)),O=Math.min(r,Math.floor(n+(p-S)*q/p+L));y(g,n,P,O,h)}var F=g[n],Q=l,R=r;for(i(g,l,n),h(g[r],F)>0&&i(g,l,r);Q<R;){for(i(g,Q,R),Q++,R--;h(g[Q],F)<0;)Q++;for(;h(g[R],F)>0;)R--}h(g[l],F)===0?i(g,l,R):i(g,++R,r),R<=n&&(l=R+1),n<=R&&(r=R-1)}})(s,a,u||0,m||s.length-1,f||d)}function i(s,a,u){var m=s[a];s[a]=s[u],s[u]=m}function d(s,a){return s<a?-1:s>a?1:0}var c=function(s){s===void 0&&(s=9),this._maxEntries=Math.max(4,s),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function x(s,a,u){if(!u)return a.indexOf(s);for(var m=0;m<a.length;m++)if(u(s,a[m]))return m;return-1}function E(s,a){k(s,0,s.children.length,a,s)}function k(s,a,u,m,f){f||(f=C(null)),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0;for(var y=a;y<u;y++){var g=s.children[y];Y(f,s.leaf?m(g):g)}return f}function Y(s,a){return s.minX=Math.min(s.minX,a.minX),s.minY=Math.min(s.minY,a.minY),s.maxX=Math.max(s.maxX,a.maxX),s.maxY=Math.max(s.maxY,a.maxY),s}function X(s,a){return s.minX-a.minX}function N(s,a){return s.minY-a.minY}function v(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function w(s){return s.maxX-s.minX+(s.maxY-s.minY)}function b(s,a){return s.minX<=a.minX&&s.minY<=a.minY&&a.maxX<=s.maxX&&a.maxY<=s.maxY}function M(s,a){return a.minX<=s.maxX&&a.minY<=s.maxY&&a.maxX>=s.minX&&a.maxY>=s.minY}function C(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(s,a,u,m,f){for(var y=[a,u];y.length;)if(!((u=y.pop())-(a=y.pop())<=m)){var g=a+Math.ceil((u-a)/m/2)*m;o(s,g,a,u,f),y.push(a,g,g,u)}}return c.prototype.all=function(){return this._all(this.data,[])},c.prototype.search=function(s){var a=this.data,u=[];if(!M(s,a))return u;for(var m=this.toBBox,f=[];a;){for(var y=0;y<a.children.length;y++){var g=a.children[y],n=a.leaf?m(g):g;M(s,n)&&(a.leaf?u.push(g):b(s,n)?this._all(g,u):f.push(g))}a=f.pop()}return u},c.prototype.collides=function(s){var a=this.data;if(!M(s,a))return!1;for(var u=[];a;){for(var m=0;m<a.children.length;m++){var f=a.children[m],y=a.leaf?this.toBBox(f):f;if(M(s,y)){if(a.leaf||b(s,y))return!0;u.push(f)}}a=u.pop()}return!1},c.prototype.load=function(s){if(!s||!s.length)return this;if(s.length<this._minEntries){for(var a=0;a<s.length;a++)this.insert(s[a]);return this}var u=this._build(s.slice(),0,s.length-1,0);if(this.data.children.length)if(this.data.height===u.height)this._splitRoot(this.data,u);else{if(this.data.height<u.height){var m=this.data;this.data=u,u=m}this._insert(u,this.data.height-u.height-1,!0)}else this.data=u;return this},c.prototype.insert=function(s){return s&&this._insert(s,this.data.height-1),this},c.prototype.clear=function(){return this.data=C([]),this},c.prototype.remove=function(s,a){if(!s)return this;for(var u,m,f,y=this.data,g=this.toBBox(s),n=[],l=[];y||n.length;){if(y||(y=n.pop(),m=n[n.length-1],u=l.pop(),f=!0),y.leaf){var r=x(s,y.children,a);if(r!==-1)return y.children.splice(r,1),n.push(y),this._condense(n),this}f||y.leaf||!b(y,g)?m?(u++,y=m.children[u],f=!1):y=null:(n.push(y),l.push(u),u=0,m=y,y=y.children[0])}return this},c.prototype.toBBox=function(s){return s},c.prototype.compareMinX=function(s,a){return s.minX-a.minX},c.prototype.compareMinY=function(s,a){return s.minY-a.minY},c.prototype.toJSON=function(){return this.data},c.prototype.fromJSON=function(s){return this.data=s,this},c.prototype._all=function(s,a){for(var u=[];s;)s.leaf?a.push.apply(a,s.children):u.push.apply(u,s.children),s=u.pop();return a},c.prototype._build=function(s,a,u,m){var f,y=u-a+1,g=this._maxEntries;if(y<=g)return E(f=C(s.slice(a,u+1)),this.toBBox),f;m||(m=Math.ceil(Math.log(y)/Math.log(g)),g=Math.ceil(y/Math.pow(g,m-1))),(f=C([])).leaf=!1,f.height=m;var n=Math.ceil(y/g),l=n*Math.ceil(Math.sqrt(g));T(s,a,u,l,this.compareMinX);for(var r=a;r<=u;r+=l){var h=Math.min(r+l-1,u);T(s,r,h,n,this.compareMinY);for(var p=r;p<=h;p+=n){var S=Math.min(p+n-1,h);f.children.push(this._build(s,p,S,m-1))}}return E(f,this.toBBox),f},c.prototype._chooseSubtree=function(s,a,u,m){for(;m.push(a),!a.leaf&&m.length-1!==u;){for(var f=1/0,y=1/0,g=void 0,n=0;n<a.children.length;n++){var l=a.children[n],r=v(l),h=(p=s,S=l,(Math.max(S.maxX,p.maxX)-Math.min(S.minX,p.minX))*(Math.max(S.maxY,p.maxY)-Math.min(S.minY,p.minY))-r);h<y?(y=h,f=r<f?r:f,g=l):h===y&&r<f&&(f=r,g=l)}a=g||a.children[0]}var p,S;return a},c.prototype._insert=function(s,a,u){var m=u?s:this.toBBox(s),f=[],y=this._chooseSubtree(m,this.data,a,f);for(y.children.push(s),Y(y,m);a>=0&&f[a].children.length>this._maxEntries;)this._split(f,a),a--;this._adjustParentBBoxes(m,f,a)},c.prototype._split=function(s,a){var u=s[a],m=u.children.length,f=this._minEntries;this._chooseSplitAxis(u,f,m);var y=this._chooseSplitIndex(u,f,m),g=C(u.children.splice(y,u.children.length-y));g.height=u.height,g.leaf=u.leaf,E(u,this.toBBox),E(g,this.toBBox),a?s[a-1].children.push(g):this._splitRoot(u,g)},c.prototype._splitRoot=function(s,a){this.data=C([s,a]),this.data.height=s.height+1,this.data.leaf=!1,E(this.data,this.toBBox)},c.prototype._chooseSplitIndex=function(s,a,u){for(var m,f,y,g,n,l,r,h=1/0,p=1/0,S=a;S<=u-a;S++){var B=k(s,0,S,this.toBBox),q=k(s,S,u,this.toBBox),L=(f=B,y=q,g=void 0,n=void 0,l=void 0,r=void 0,g=Math.max(f.minX,y.minX),n=Math.max(f.minY,y.minY),l=Math.min(f.maxX,y.maxX),r=Math.min(f.maxY,y.maxY),Math.max(0,l-g)*Math.max(0,r-n)),P=v(B)+v(q);L<h?(h=L,m=S,p=P<p?P:p):L===h&&P<p&&(p=P,m=S)}return m||u-a},c.prototype._chooseSplitAxis=function(s,a,u){var m=s.leaf?this.compareMinX:X,f=s.leaf?this.compareMinY:N;this._allDistMargin(s,a,u,m)<this._allDistMargin(s,a,u,f)&&s.children.sort(m)},c.prototype._allDistMargin=function(s,a,u,m){s.children.sort(m);for(var f=this.toBBox,y=k(s,0,a,f),g=k(s,u-a,u,f),n=w(y)+w(g),l=a;l<u-a;l++){var r=s.children[l];Y(y,s.leaf?f(r):r),n+=w(y)}for(var h=u-a-1;h>=a;h--){var p=s.children[h];Y(g,s.leaf?f(p):p),n+=w(g)}return n},c.prototype._adjustParentBBoxes=function(s,a,u){for(var m=u;m>=0;m--)Y(a[m],s)},c.prototype._condense=function(s){for(var a=s.length-1,u=void 0;a>=0;a--)s[a].children.length===0?a>0?(u=s[a-1].children).splice(u.indexOf(s[a]),1):this.clear():E(s[a],this.toBBox)},c})})(xs);var al=xs.exports,il=nt&&nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(se,"__esModule",{value:!0});se.System=void 0;const Wt=Yt,ll=il(al),H=tt,kt=pt(),cl=Ut,Al=Tt,ul=wt,pe=Rt(),dl=ao(),ql=Ot;class pl extends ll.default{constructor(){super(...arguments),this.response=new H.Response}draw(e){this.all().forEach(o=>{o.draw(e)})}drawBVH(e){this.data.children.forEach(({minX:o,maxX:i,minY:d,maxY:c})=>{pe.Polygon.prototype.draw.call({pos:{x:o,y:d},calcPoints:(0,kt.createBox)(i-o,c-d)},e)}),this.all().forEach(o=>{const{pos:i,w:d,h:c}=o.getAABBAsBox();pe.Polygon.prototype.draw.call({pos:i,calcPoints:(0,kt.createBox)(d,c)},e)})}updateBody(e){this.remove(e),e.updateAABB(),this.insert(e)}remove(e,o){return e.system=void 0,super.remove(e,o)}insert(e){return e.system=this,super.insert(e)}update(){this.all().forEach(e=>{e.isStatic||this.updateBody(e)})}separate(){this.checkAll(e=>{e.a.isTrigger||(e.a.pos.x-=e.overlapV.x,e.a.pos.y-=e.overlapV.y,this.updateBody(e.a))})}checkOne(e,o){e.isStatic||this.getPotentials(e).forEach(i=>{this.checkCollision(e,i)&&o(this.response)})}checkAll(e){this.all().forEach(o=>{this.checkOne(o,e)})}getPotentials(e){return this.search(e).filter(o=>o!==e)}checkCollision(e,o){if(this.response.clear(),e.type===H.Types.Circle&&o.type===H.Types.Circle)return(0,Wt.testCircleCircle)(e,o,this.response);if(e.type===H.Types.Circle&&o.type!==H.Types.Circle)return(0,Wt.testCirclePolygon)(e,o,this.response);if(e.type!==H.Types.Circle&&o.type===H.Types.Circle)return(0,Wt.testPolygonCircle)(e,o,this.response);if(e.type!==H.Types.Circle&&o.type!==H.Types.Circle)return(0,Wt.testPolygonPolygon)(e,o,this.response);throw Error("Not implemented")}raycast(e,o,i=()=>!0){let d=1/0,c=null;const x=this.createLine(e,o),E=this.getPotentials(x).filter(k=>i(k)&&this.checkCollision(x,k));return this.remove(x),E.forEach(k=>{(k.type===H.Types.Circle?(0,kt.intersectLineCircle)(x,k):(0,kt.intersectLinePolygon)(x,k)).forEach(X=>{const N=(0,kt.distance)(e,X);N<d&&(d=N,c={point:X,collider:k})})}),c}createPoint(e){const o=new cl.Point(e);return this.insert(o),o}createLine(e,o,i=0){const d=new dl.Line(e,o);return d.setAngle(i),this.insert(d),d}createCircle(e,o){const i=new Al.Circle(e,o);return this.insert(i),i}createBox(e,o,i,d=0){const c=new ul.Box(e,o,i);return c.setAngle(d),this.insert(c),c}createEllipse(e,o,i,d,c=0){const x=new ql.Ellipse(e,o,i,d);return x.setAngle(c),this.insert(x),x}createPolygon(e,o,i=0){const d=new pe.Polygon(e,o);return d.setAngle(i),this.insert(d),d}}se.System=pl;(function(t){var e=nt&&nt.__createBinding||(Object.create?function(i,d,c,x){x===void 0&&(x=c);var E=Object.getOwnPropertyDescriptor(d,c);(!E||("get"in E?!d.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return d[c]}}),Object.defineProperty(i,x,E)}:function(i,d,c,x){x===void 0&&(x=c),i[x]=d[c]}),o=nt&&nt.__exportStar||function(i,d){for(var c in i)c!=="default"&&!Object.prototype.hasOwnProperty.call(d,c)&&e(d,i,c)};Object.defineProperty(t,"__esModule",{value:!0}),o(tt,t),o(Tt,t),o(Ot,t),o(Rt(),t),o(wt,t),o(Ut,t),o(ao(),t),o(se,t),o(pt(),t)})(ro);const mt=new ro.System,Bs=t=>{mt.insert(t),mt.updateBody(t)},Lt=t=>{mt.remove(t)},U=(t,e,o)=>{const i=new ro.Box(t,e,o);return Bs(i),i},io=document.getElementById("activeItemTips"),et=t=>{hl(t),ml()},hl=t=>{io.textContent=t},ml=()=>{io.classList.remove("hide")},Z=()=>{io.classList.add("hide")},lo=new rt,co=document.querySelector("#room1 .wallBtnWrap"),ks=document.getElementById("monster-face"),fl=document.getElementById("monster-face-wrap");ks.addEventListener("animationend",t=>{t.target.remove()});const yl=()=>{st("room1WallBtn"),Es(),Z()},bs=t=>{t.code==="KeyE"&&(co.classList.add("pressed"),A.play("wall_btn_press"),A.vol("wall_btn_press",.5),yl(),lo.broadcast(),fl.style.transform=`rotateY(${-Ne()}deg)`,ks.classList.add("show"),A.play("scream-sound"),A.vol("scream-sound",.5))},vl=()=>{co.classList.add("active"),document.addEventListener("keydown",bs),et("press E")},Es=()=>{co.classList.remove("active"),document.removeEventListener("keydown",bs),Z()};D("room1WallBtn",{isActive:!1,maxX:1900,minX:1350,maxZ:650,minZ:350,activationCallback:vl,deactivationCallback:Es});const Cs=new rt,Ao=document.querySelector("#room5 .wallBtnWrap"),gl=()=>{st("room5WallBtn"),Ms(),Z()},Ls=t=>{t.code==="KeyE"&&(Ao.classList.add("pressed"),A.play("wall_btn_press"),A.vol("wall_btn_press",.5),setTimeout(()=>{A.play("glassWallSound"),A.vol("glassWallSound",.5)},500),gl(),Cs.broadcast())},wl=()=>{Ao.classList.add("active"),document.addEventListener("keydown",Ls),et("press E")},Ms=()=>{Ao.classList.remove("active"),document.removeEventListener("keydown",Ls),Z()};D("room5WallBtn",{isActive:!1,maxX:950,minX:600,maxZ:3600,minZ:3350,activationCallback:wl,deactivationCallback:Ms});U({x:-800,y:-650},2800,200);U({x:-700,y:-730},200,4500);U({x:910,y:600},200,500);const Sl=U({x:950,y:260},-500,100),xl=U({x:440,y:260},100,700),Bl=U({x:440,y:850},550,100),kl=()=>{Lt(Sl),Lt(xl),Lt(Bl)};U({x:1800,y:-730},200,1500);U({x:2e3,y:600},-1200,200);U({x:900,y:800},200,-900);const Ps=U({x:900,y:-600},200,800),bl=()=>{Lt(Ps)},El=()=>{Bs(Ps)};U({x:2100,y:1e3},200,1600);U({x:2200,y:2400},-1250,100);U({x:2200,y:1e3},-1250,100);const Cl=U({x:920,y:1e3},200,1600),Ll=()=>{Lt(Cl)};Cs.subscribe(Ll);U({x:920,y:2400},200,1300);U({x:-600,y:3550},1600,200);const Ml=U({x:-600,y:2650},1600,300),Pl=()=>{Ml.setPosition(-200,2650)};lo.subscribe(Pl);const Il=100,Is=200;let Pt,Ye=Is,uo=!0;const Xl=()=>{uo=!0},Yl=()=>{uo=!1},Tl=()=>{uo&&(A.play("playerSteps1"),A.vol("playerSteps1",.5))},Xs=()=>{Pt=setInterval(Tl,Ye)},Ys=()=>{clearInterval(Pt),Pt=void 0},Rl=t=>{if(t){if(Pt!==void 0)return;Xs()}else Ys()},Ol=t=>{t?Ye=Il:Ye=Is,Pt&&(Ys(),Xs())};_.subscribe(Rl);$e.subscribe(Ol);const Wo=50,Ts=document.getElementById("bugSpell");let re=!1,Rs=!1;const Ul=t=>Rs=t,Os=()=>Rs,Zl=()=>re,Us=()=>{document.addEventListener("keydown",Fs)},Zs=()=>{document.removeEventListener("keydown",Fs)},Fs=t=>{t.code==="KeyR"&&(re?Fl():Dl())},Fl=()=>{re=!1,A.play("transformSpell"),A.vol("transformSpell",.5),We(16),Ts.style.opacity="0.5",Xl(),us(),On(),ee(),El(),oo()&&(vs(),no())},Dl=()=>{if(Gn()<Wo){Nn(),A.play("notEnoughMana"),A.vol("notEnoughMana",.5);return}eo(),re=!0,A.play("transformSpell"),A.vol("transformSpell",.5),Vn(Wo),We(-420),Ts.style.opacity="1",Yl(),ds(),ja(),Yn(),Ka(),bl(),oo()&&(Ni(),so())},Ql=document.getElementById("healSpell"),No=70;let Ds=!1;const Wl=t=>Ds=t,Qs=()=>Ds,Ws=()=>{document.addEventListener("keydown",Gs)},Ns=()=>{document.removeEventListener("keydown",Gs)},Nl=()=>{Ql.animate([{opacity:.5},{opacity:1},{opacity:.5}],{duration:500})},Gs=t=>{if(t.code==="KeyT"){if(Gn()<No){Nn(),A.play("notEnoughMana"),A.vol("notEnoughMana",.5);return}Vn(No),_a(40),Nl(),A.play("healSpell"),A.vol("healSpell",.5)}},Vs=document.getElementById("openedScrollWrap"),Gl=document.getElementById("openedScroll"),Vl=document.getElementById("scrollContentWrap");let qo=!1;const Kl=t=>{t.code==="KeyQ"&&zl()},Ks=()=>Gl,zs=t=>{Vl.innerHTML=t},Hs=()=>{qo=!0,Zt(!1),Os()&&Zs(),Qs()&&Ns(),A.play("scrollRead"),A.vol("scrollRead",.5),Vs.classList.add("open"),window.addEventListener("keydown",Kl)},zl=()=>{qo=!1,Os()&&Us(),Qs()&&Ws(),A.play("scrollClose"),A.vol("scrollClose",.5),Vs.classList.remove("open"),Zt(Jn())},Hl=()=>qo,ut=t=>t>360?t-360:t<0?t+360:t;let K={x:0,z:0};const po=t=>(t<=90?jl(t):t<=180?Jl(t):t<=270?_l(t):t<=360&&$l(t),K),jl=t=>{K.x=t/90*-1,K.z=1+K.x},Jl=t=>{K.z=(t/90-1)*-1,K.x=(1+K.z)*-1},_l=t=>{K.x=t/90-2,K.z=(1-K.x)*-1},$l=t=>{K.z=t/90-3,K.x=1-K.z},ho=new rt;let lt={newRealAngleX:0,newRealAngleY:0,newNormalizedAngleX:0,newNormalizedAngleY:0,movementX:0,movementY:0};const tc=3;let he=0;const mo=t=>{if(he<=tc){he+=1;return}else he=0;lt.newRealAngleX=Ne()-t.movementX,lt.newRealAngleY=mn()-t.movementY,lt.newNormalizedAngleX=ut(_t()-t.movementX),lt.newNormalizedAngleY=ut(fn()-t.movementY),ho.broadcast(lt)},ec=()=>{lt={newRealAngleX:0,newRealAngleY:0,newNormalizedAngleX:0,newNormalizedAngleY:0,movementX:1,movementY:0},ho.broadcast(lt)},oc=()=>{document.addEventListener("mousemove",mo)},nc=()=>{document.removeEventListener("mousemove",mo)},js=t=>{ns()||t.code==="ShiftLeft"&&Ti()},Js=t=>{ns()&&t.code==="ShiftLeft"&&ss()},sc=()=>{window.addEventListener("keydown",js),window.addEventListener("keyup",Js)},rc=()=>{window.removeEventListener("keydown",js),window.removeEventListener("keyup",Js)},Zt=t=>{if(t){Na(),as(),sc(),us(),oc(),oo()&&no();return}Ga(),Va(),rc(),rs(),ds(),eo(),nc(),so()},ac=t=>{Hl()||Zt(t)},ic=()=>{At.subscribe(ac)};let _s;const $s=()=>_s,lc=()=>{_s=U({x:0,y:0},2,2)},cc=()=>{const t=$s();mt.getPotentials(t).forEach(e=>{mt.checkCollision(t,e)&&Ac(mt.response)})},Ac=t=>{t.aInB&&(t.overlapV.x&&vt(dt()-t.overlapV.x),t.overlapV.y&&gt(qt()-t.overlapV.y))},uc=()=>{var t;(t=$s())==null||t.setPosition(Ge(),Ve()),cc()},dc=t=>{if(t){Go.start();return}Go.stop()},Go=new J({callback:uc,fps:60}),qc=()=>{_.subscribe(dc)};let Te;const pc=t=>{Te=t};let tr;const hc=()=>{const t=Te[wi(0,Te.length)];A.play(t),A.vol(t,.5)},mc=()=>{tr=setInterval(hc,4e4)},fc=()=>{clearInterval(tr)},er=document.getElementById("mouseLockHint"),or=()=>{er.classList.remove("hidden")},nr=()=>{er.classList.add("hidden")};pc(["lvlBg1","lvlBg2","lvlBg3","lvlBg4"]);const sr=t=>{t?or():nr()},yc=()=>{At.subscribe(sr)},vc=()=>{At.unsubscribe(sr)},gc=({x:t,y:e,z:o,angleX:i,angleY:d})=>{vt(t),We(e),gt(o),Ba({x:t,y:e,z:o}),mo({movementX:i,movementY:d})},wc=800,Sc=16,xc=687,Bc=0,kc=0;gc({x:wc,y:Sc,z:xc,angleX:Bc,angleY:kc});const bc=document.getElementById("healSpell"),fo=document.querySelector("#room2 .spell1"),yo=t=>{t.code==="KeyE"&&(document.removeEventListener("keydown",yo),st("room2HealSpell"),Z(),fo.remove(),bc.classList.remove("hide"),A.play("pickingSpell"),A.vol("pickingSpell",.5),Wl(!0),Ws())},Ec=()=>{fo.style.filter="brightness(0.8)",document.addEventListener("keydown",yo),et("press E")},Cc=()=>{fo.style.filter="brightness(0.5)",document.removeEventListener("keydown",yo),Z()};D("room2HealSpell",{isActive:!1,maxX:0,minX:-550,maxZ:50,minZ:-570,activationCallback:Ec,deactivationCallback:Cc});const Jt=new Map,rr=document.getElementById("lvlTaskWrap"),Lc=rr.getElementsByClassName("lvlTaskList")[0],Mc=()=>{rr.classList.remove("hide")},Pc=()=>{Jt.forEach(t=>{t.elem.remove()}),Jt.clear()},ar=(t,e)=>{const o=document.createElement("li");o.textContent=e,Jt.set(t,{title:e,elem:o}),Lc.append(o)},Ic=t=>{t.forEach(([e,o])=>{ar(e,o)})},Xc=t=>{var e;(e=Jt.get(t))==null||e.elem.classList.add("done")},ir=document.querySelector("#room2 .scroll1");let lr=!1;const cr=t=>{t.code==="KeyQ"&&(Z(),window.removeEventListener("keydown",cr),ee())},vo=t=>{if(t.code!=="KeyE")return;Xn("room2Scroll");const e=Ks();e.style.filter="brightness(0.8) hue-rotate(140deg)",zs(`Further is a magic wall with portal behind it, somewhere 
  in this tunnels must be a way to reach it. I think I saw a light coming 
  from a crack near one of the walls. I wish you luck, it seems to me I 
  will stay here for ever...`),Hs(),Z(),et("press Q"),window.addEventListener("keydown",cr),window.removeEventListener("keydown",vo),lr||Yc()},Yc=()=>{Xc("blueScroll"),ar("main","find the way out"),lr=!0,A.play("taskDone"),A.vol("taskDone",.5)},Tc=()=>{ir.classList.add("active"),window.addEventListener("keydown",vo),et("press E")},Rc=()=>{ir.classList.remove("active"),window.removeEventListener("keydown",vo),Z()};D("room2Scroll",{isActive:!1,maxZ:800,minZ:200,maxX:-100,minX:-500,activationCallback:Tc,deactivationCallback:Rc});const Ar=()=>{A.loop("torch1",!0),A.play("torch1"),A.vol("torch1",.7)},ur=()=>{A.loop("torch1",!1),A.stop("torch1")};D("room2Torch",{isActive:!1,maxX:450,minX:-150,maxZ:-200,minZ:-500,activationCallback:Ar,deactivationCallback:ur});const go=()=>{A.loop("bugSound1",!0),A.play("bugSound1"),A.vol("bugSound1",.5)},wo=()=>{A.loop("bugSound1",!1),A.stop("bugSound1")};D("room2WallBug",{isActive:!1,maxX:950,minX:600,maxZ:250,minZ:-100,activationCallback:go,deactivationCallback:wo});const Oc=document.getElementById("room1"),Uc=document.getElementById("room3"),Zc=document.getElementById("room5"),Fc=new Map([["room1",{isActive:!1,el:Oc,coords:{minX:600,maxX:1900,minZ:-530,maxZ:700}}],["room3",{isActive:!1,el:Uc,coords:{minX:420,maxX:2200,minZ:1e3,maxZ:2450}}],["room5",{isActive:!1,el:Zc,coords:{minX:-600,maxX:950,minZ:2250,maxZ:3600}}]]);let Re,Oe;const Dc=()=>{Re=Ge(),Oe=Ve()},Qc=()=>{for(const t of Fc.values())if(Oe<=t.coords.maxZ&&Oe>=t.coords.minZ&&Re<=t.coords.maxX&&Re>=t.coords.minX){if(t.isActive)return;t.isActive=!0,t.el.classList.remove("optimizeRender")}else t.isActive&&(t.isActive=!1,t.el.classList.add("optimizeRender"))},Wc=()=>{Dc(),Qc()},dr=new J({callback:Wc,fps:10}),Nc=()=>{dr.start()},Gc=()=>{dr.stop()},qr=document.getElementById("lvl1EndScreen"),pr=qr.querySelector(".close"),Vc=()=>{Pc(),Gc(),vc(),nr(),Ci(),Hn(),Zt(!1),Zs(),Ns(),so(),mi(),fc(),qr.classList.remove("hide"),A.loop("lvlEnd",!0),A.play("lvlEnd"),A.vol("lvlEnd",.5)},Kc=()=>{A.play("menuButtonClick"),A.vol("menuButtonClick",.5),location.reload()},zc=()=>{j.play("menuButtonHover"),j.vol("menuButtonHover")};pr.addEventListener("mouseover",zc);pr.addEventListener("click",Kc);const Hc=()=>{A.loop("portalRoomSound",!0),A.play("portalRoomSound"),A.vol("portalRoomSound",.5)},hr=()=>{A.loop("portalRoomSound",!1),A.stop("portalRoomSound")};D("room3portalRoomSound",{isActive:!1,maxX:2200,minX:950,maxZ:2500,minZ:1050,activationCallback:Hc,deactivationCallback:hr});const jc=()=>{hr(),Vc()};D("room3PortalEntering",{isActive:!1,maxX:2250,minX:2050,maxZ:2250,minZ:1300,activationCallback:jc,deactivationCallback:()=>{}});const mr=document.querySelector("#room3 .scroll1"),fr=t=>{t.code==="KeyQ"&&(Z(),window.removeEventListener("keydown",fr),ee())},So=t=>{if(t.code!=="KeyE")return;const e=Ks();e.style.filter="brightness(0.8) hue-rotate(260deg)",Xn("room3Scroll"),zs("further danger awaits you, better find some weapon and heal your wounds"),Hs(),Z(),et("press Q"),window.addEventListener("keydown",fr),window.removeEventListener("keydown",So)},Jc=()=>{mr.classList.add("active"),window.addEventListener("keydown",So),et("press E")},_c=()=>{mr.classList.remove("active"),window.removeEventListener("keydown",So),Z()};D("room3Scroll",{isActive:!1,maxZ:2e3,minZ:1400,maxX:1600,minX:1100,activationCallback:Jc,deactivationCallback:_c});const yr=document.querySelector("#room3 .protectionOpacityWall"),$c=()=>{yr.style.webkitMaskImage="radial-gradient(transparent 0%, black 15%)"},tA=()=>{yr.style.webkitMaskImage="radial-gradient(transparent 0%, black 0%)"};D("secretWallFar",{isActive:!1,maxX:900,minX:450,maxZ:2100,minZ:1300,activationCallback:$c,deactivationCallback:tA});const eA=document.getElementById("bugSpell"),xo=document.querySelector("#room4 .spell1"),Bo=t=>{t.code==="KeyE"&&(document.removeEventListener("keydown",Bo),st("room4BugSpell"),Z(),xo.remove(),eA.classList.remove("hide"),A.play("pickingSpell"),A.vol("pickingSpell",.5),Ul(!0),Us())},oA=()=>{xo.style.filter="brightness(0.8)",document.addEventListener("keydown",Bo),et("press E")},nA=()=>{xo.style.filter="brightness(0.5)",document.removeEventListener("keydown",Bo),Z()};D("room4BugSpell",{isActive:!1,maxX:100,minX:-550,maxZ:2300,minZ:1300,activationCallback:oA,deactivationCallback:nA});D("room5FloorBug",{isActive:!1,maxX:450,minX:-100,maxZ:3250,minZ:2900,activationCallback:go,deactivationCallback:wo});D("room5ShieldBug",{isActive:!1,maxX:950,minX:750,maxZ:3250,minZ:2900,activationCallback:go,deactivationCallback:wo});const ko=document.querySelector("#room5 .swordItem1"),bo=t=>{t.code==="KeyE"&&(window.removeEventListener("keydown",bo),ko.remove(),vs(),A.play("pickingSword"),A.vol("pickingSword",.5),Gi(!0),no(),st("room5Sword"),Z())},sA=()=>{ko.style.filter="brightness(1.5)",window.addEventListener("keydown",bo),et("press E")},rA=()=>{ko.style.filter="brightness(1)",window.removeEventListener("keydown",bo),Z()};D("room5Sword",{isActive:!1,maxX:450,minX:-50,maxZ:3350,minZ:3050,activationCallback:sA,deactivationCallback:rA});D("room5Torch",{isActive:!1,maxX:-150,minX:-500,maxZ:3500,minZ:2500,activationCallback:Ar,deactivationCallback:ur});const aA=document.querySelector("#room5 .bulkWallWrap"),iA=()=>{aA.classList.add("open"),setTimeout(()=>{A.play("wall_opening"),A.vol("wall_opening",.5)},1500)};lo.subscribe(iA);const lA=document.getElementById("camera"),cA=()=>{lA.style.transform=`
    rotateX(${mn()}deg) 
    rotateY(${Ne()}deg) 
    translateX(${dt()}px) 
    translateZ(${qt()}px)
    translateY(${va()}px)
  `},AA=new J({callback:cA,fps:30}),uA=()=>{AA.start()},dA=document.getElementById("scenesWrap");let me,fe,ye,ve,ge,we;const qA=()=>{ve=Xi(),ge=_e(),we=Yi(),!(me===ve&&fe===ge&&ye===we)&&(me=ve,fe=ge,ye=we,dA.style.transform=`
    translateX(${me}px) 
    translateZ(${ye}px)
    translateY(${fe}px)
    rotateY(180deg)
  `)},pA=new J({callback:qA,fps:10}),hA=()=>{pA.start()},ae=document.getElementById("sceneScreen"),mA=()=>{ae.classList.remove("transparent")},vr=()=>{ae.classList.add("transparent")},fA=()=>ae,yA=()=>{ae.remove()},Se=document.querySelector("#room2 .bugWrap2"),vA=()=>{Se.classList.add("moving","move"),Se.addEventListener("animationend",()=>{Se.classList.remove("moving")})},xe="rotateX(270deg) rotateY(0deg) translateX(800px) translateZ(687px) translateY(-360px)",Vo="rotateX(330deg) rotateY(0deg) translateX(800px) translateZ(687px) translateY(-180px)",Ko="rotateX(330deg) rotateY(-50deg) translateX(800px) translateZ(687px) translateY(-180px)",zo="rotateX(330deg) rotateY(35deg) translateX(800px) translateZ(687px) translateY(-180px)",Ho="rotateX(300deg) rotateY(65deg) translateX(800px) translateZ(687px) translateY(-180px)",jo="rotateX(288deg) rotateY(0deg) translateX(800px) translateZ(687px) translateY(-180px)",Jo="rotateX(288deg) rotateY(0deg) translateX(800px) translateZ(687px) translateY(16px)",gA="rotateX(360deg) rotateY(0deg) translateX(800px) translateZ(687px) translateY(16px)",wA=document.getElementById("camera"),ot=(t,e,o)=>wA.animate([{transform:t},{transform:e}],{duration:o,easing:"ease"}).finished,SA=t=>fA().animate([{backgroundColor:"black"},{backgroundColor:"transparent"}],{duration:t,easing:"ease",fill:"forwards"}).finished,xA=async()=>{SA(2e3),await ot(xe,xe,1e3),await ot(xe,Vo,2e3),await ot(Vo,Ko,3e3),await ot(Ko,zo,3e3),await ot(zo,Ho,1e3),await ot(Ho,jo,1e3),await ot(jo,Jo,1e3),vA(),await ot(Jo,gA,1e3),vr()},BA=()=>{uA(),hA(),lc(),qc(),or(),Nc(),ec(),Ic([["blueScroll","read blue scroll"]]),Mc(),Ja(40),qi(0)},kA=async()=>{Ei(),ne(),A.play("awakeningOST"),A.vol("awakeningOST",.5),await xA(),On(),yc(),ic(),Zt(Jn()),Ai(),hi(),ya(),mc(),yA()},gr=document.getElementById("gameSection"),_o=()=>{gr.classList.remove("hide")},bA=()=>{gr.classList.add("hide")},Eo=document.getElementById("graphicModeSwitch");let Co="low";const EA=()=>{st("room2WallBug"),kl(),st("room5FloorBug"),st("room5ShieldBug")},CA=()=>{Co==="low"?document.body.classList.add("lowGraphic"):document.body.classList.remove("lowGraphic")},LA=()=>{Co==="low"&&EA()},wr=t=>{Co=t,CA()},MA=t=>{var e;(e=document.querySelector(`#graphicModeSwitch button[data-graphicmode="${t}"]`))==null||e.classList.add("selected"),wr(t)},PA=({target:t})=>{t.tagName==="BUTTON"&&(t.classList.contains("selected")||(A.play("menuButtonClick"),A.vol("menuButtonClick",.5),Eo.querySelector(".selected").classList.remove("selected"),t.classList.add("selected"),wr(t.dataset.graphicmode)))},IA=({target:t})=>{t.tagName==="BUTTON"&&j.play("menuButtonHover")};Eo.addEventListener("click",PA);Eo.addEventListener("mouseover",IA);const Ft=document.getElementById("menu"),$o=()=>{Ft.classList.add("hide"),A.loop("menuBg",!1),A.stop("menuBg")},XA=()=>{Ft.remove()},Sr=()=>{A.loop("menuBg",!0),A.play("menuBg"),A.vol("menuBg",.5),Ft.classList.remove("hide")},YA=({target:t})=>{t.classList.contains("menu_button")&&(j.play("menuButtonHover"),j.vol("menuButtonHover"))},Ue=()=>{window.removeEventListener("keydown",Ue),ma(),Sr(),Gt(),bA(),mA(),Hn()},TA=({target:t})=>{if(!t.classList.contains("menu_button"))return;const e=t.dataset.action;switch(A.play("menuButtonClick"),A.vol("menuButtonClick",.5),e){case"startGame":{Be("Explore your surroundings carefully"),ke(),Lo(),_o(),$o(),Mi(),LA(),BA(),setTimeout(()=>{Gt(),kA(),setTimeout(()=>{Lr(),XA(),document.getElementById("aboutSection").remove()},600)},1e3);return}case"openControlsSubPanel":{ft("controlsSection");return}case"openAboutSubPanel":{ft("aboutSection");return}case"startFpsTour":{Be("press Esc to return to the menu"),ke(),Lo(),_o(),$o(),setTimeout(()=>{const o=ha();Gt(),vr(),o.onfinish=Ue,window.addEventListener("keydown",Ue),ne()},1e3);return}default:throw"menu button with unknown action"}};Ft.addEventListener("click",TA);Ft.addEventListener("mouseover",YA);document.querySelector(".menu_button.flicker").addEventListener("click",({target:t})=>{t.classList.remove("flicker")},{once:!0});const RA=()=>{"ontouchstart"in window&&ft("touchScreenMSG")},OA=()=>{Sr(),RA(),Gt(),Cr(),Er()},UA=()=>{br(),Be("click to continue"),ke(),window.addEventListener("click",OA,{once:!0})};window.addEventListener("load",UA);const ZA=t=>{t.preventDefault()};window.addEventListener("contextmenu",ZA);const ie=new rt,FA=t=>{const e=DA(t.newRealAngleY),o=ut(t.newNormalizedAngleX),i=QA(t.newRealAngleY,e,t.newNormalizedAngleY);ga(t.newRealAngleX),wa(e),Sa(o),xa(i),ie.broadcast()},tn=60,en=-60,DA=t=>t>tn?tn:t<en?en:t,QA=(t,e,o)=>t!==e?fn():ut(o);ho.subscribe(FA);const WA=()=>{const{x:t,z:e}=po(ut(_t()-180));Ia(t),Xa(e)};ie.subscribe(WA);const NA=()=>{const{x:t,z:e}=po(ut(_t()));Ma(t),Pa(e)};ie.subscribe(NA);const GA=()=>{const{x:t,z:e}=po(ut(_t()-90));Ya(t),Ta(e)};ie.subscribe(GA);let Ze,Fe;const VA=()=>{document.documentElement.requestFullscreen?(Ze=()=>document.documentElement.requestFullscreen(),Fe=()=>document.exitFullscreen()):(Ze=()=>document.documentElement.webkitRequestFullscreen(),Fe=()=>document.webkitExitFullscreen()),At.subscribe(t=>{t?KA():zA()})},KA=()=>{Ze()},zA=()=>{Fe()};VA();ms();MA("low");ft("userEntryCautionView");
